!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=function(e){t(e,window,document)}:t(jQuery,window,document)}(function(t,e,n,s){function o(t,e){e=e||{};var n=e.classNames||{};t._options.classNameSeconds=n.seconds||"jst-seconds",t._options.classNameMinutes=n.minutes||"jst-minutes",t._options.classNameHours=n.hours||"jst-hours",t._options.classNameClearDiv=n.clearDiv||"jst-clearDiv",t._options.classNameTimeout=n.timeout||"jst-timeout"}var i,r=function(t){return this._options={},this.targetElement=t,this};r.start=function(t,e){return i=new r(e),o(i,t),i.start(t)},r.prototype.start=function(e){var s=this,o=function(t){var e=n.createElement("div");e.className=s._options.classNameSeconds;var o=n.createElement("div");o.className=s._options.classNameMinutes;var i=n.createElement("div");i.className=s._options.classNameHours;var r=n.createElement("div");return r.className=s._options.classNameClearDiv,t.append(i).append(o).append(e).append(r)};this.targetElement.each(function(n,s){var r=this,a=t(s),c=a.attr("class");return a.on("complete",function(){clearInterval(a.intervalId)}),a.on("complete",function(){a.onComplete(a)}),a.on("complete",function(){a.addClass(r._options.classNameTimeout)}),a.on("complete",function(){e&&e.loop===!0&&i.resetTimer(a,e,c)}),a.on("pause",function(){clearInterval(a.intervalId),a.paused=!0}),a.on("resume",function(){a.paused=!1,r.startCountdown(a,{secondsLeft:a.data("timeLeft")})}),o(a),this.startCountdown(a,e)}.bind(this))},r.prototype.resetTimer=function(t,e,n){var s=0;e.loopInterval&&(s=1e3*parseInt(e.loopInterval,10)),setTimeout(function(){t.trigger("reset"),t.attr("class",n+" loop"),i.startCountdown(t,e)},s)},r.prototype.fetchSecondsLeft=function(t){var e=t.data("seconds-left"),n=t.data("minutes-left");if(Number.isFinite(e))return parseInt(e,10);if(Number.isFinite(n))return 60*parseFloat(n);throw"Missing time data"},r.prototype.startCountdown=function(t,e){e=e||{};var n=null,s=function(){return clearInterval(n),this.clearTimer(t)}.bind(this);t.onComplete=e.onComplete||s,t.allowPause=e.allowPause||!1,t.allowPause&&t.on("click",function(){t.paused?t.trigger("resume"):t.trigger("pause")});var o=e.secondsLeft||this.fetchSecondsLeft(t),i=e.refreshRate||1e3,r=o+this.currentTime(),a=r-this.currentTime();this.setFinalValue(this.formatTimeLeft(a),t),n=setInterval(function(){a=r-this.currentTime(),a<0&&(a=0),t.data("timeLeft",a),this.setFinalValue(this.formatTimeLeft(a),t),t.trigger("update",a)}.bind(this),i),t.intervalId=n},r.prototype.clearTimer=function(t){t.find(".jst-seconds").text("00"),t.find(".jst-minutes").text("00:"),t.find(".jst-hours").text("00:")},r.prototype.currentTime=function(){return Math.round((new Date).getTime()/1e3)},r.prototype.formatTimeLeft=function(t){var e=function(t,e){e=e||2,t+="";return t.length>=e?t:Array(e-t.length+1).join(0)+t},n=Math.floor(t/3600);t-=3600*n;var s=Math.floor(t/60);t-=60*s;var o=parseInt(t%60,10);return 0==+n&&0==+s&&0==+o?[]:[e(n),e(s),e(o)]},r.prototype.setFinalValue=function(t,e){if(0===t.length)return this.clearTimer(e),e.trigger("complete"),!1;e.find("."+this._options.classNameSeconds).text(t.pop()),e.find("."+this._options.classNameMinutes).text(t.pop()+":"),e.find("."+this._options.classNameHours).text(t.pop()+":")},t.fn.startTimer=function(t){return this.TimerObject=r,r.start(t,this),this}});